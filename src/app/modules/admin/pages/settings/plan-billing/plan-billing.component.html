<div class="w-full max-w-3xl">

    <!-- Form -->
    <form [formGroup]="accountForm">


        <div class="w-full">
            <div class="text-xl">Create Bins</div>
            <div class="text-secondary">Create Bins Card For Each Bank</div>
        </div>



        <div class="grid sm:grid-cols-4 gap-6 w-full mt-3">
            <!-- Email -->
            <div class="sm:col-span-2">
                <mat-form-field
                    class="w-full"
                    [subscriptSizing]="'dynamic'">
                    <mat-label>bin</mat-label>
                    <mat-icon class="icon-size-5" [svgIcon]="'heroicons_solid:credit-card'" matPrefix></mat-icon>
                    <input
                        [formControlName]="'bin'"
                        matInput>
                        <mat-error *ngIf="accountForm.get('bin').hasError('required') && accountForm.get('bin').touched">
                            bin is required
                        </mat-error>
                </mat-form-field>
            </div>

            <div class="sm:col-span-2">
                <mat-form-field
                    class="w-full"
                    [subscriptSizing]="'dynamic'">
                    <mat-label>systemCode</mat-label>
                    <mat-icon class="icon-size-5" [svgIcon]="'heroicons_solid:cog'" matPrefix></mat-icon>
                    <input
                        [formControlName]="'systemCode'"
                        matInput>
                        <mat-error *ngIf="accountForm.get('systemCode').hasError('required') && accountForm.get('systemCode').touched">
                            systemCode is required
                        </mat-error>
                </mat-form-field>
            </div>


     
            <div class="sm:col-span-2">
                <mat-form-field
                    class="w-full"
                    [subscriptSizing]="'dynamic'">
                    <mat-label>cardType</mat-label>
                    <mat-icon class="icon-size-5"  svgIcon="feather:credit-card" matPrefix></mat-icon>
                    <input
                        [formControlName]="'cardType'"
                        matInput>
                        <mat-error *ngIf="accountForm.get('cardType').hasError('required') && accountForm.get('cardType').touched">
                            cardType is required
                        </mat-error>
                </mat-form-field>
            </div>


            <div class="sm:col-span-2">
                <mat-form-field
                    class="w-full"
                    [subscriptSizing]="'dynamic'">
                    <mat-label>serviceCode</mat-label>
                    <mat-icon class="icon-size-5" [svgIcon]="'heroicons_solid:shield-check'" matPrefix></mat-icon>
                    <input
                        [formControlName]="'serviceCode'"
                        matInput>
                        <mat-error *ngIf="accountForm.get('serviceCode').hasError('required') && accountForm.get('serviceCode').touched">
                            serviceCode is required
                        </mat-error>
                </mat-form-field>
            </div>


            <div class="sm:col-span-2">
                <mat-form-field class="w-full" [subscriptSizing]="'dynamic'">
                    <mat-label>Bank</mat-label>
                    <mat-icon svgIcon="heroicons_outline:building-library"></mat-icon>
                    <mat-select [formControlName]="'bankCode'">
                        <mat-option *ngFor="let bank of banks" [value]="bank.id">
                            {{ bank.name }}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
            
        </div>
        <div class="flex items-center justify-end">
            <button
                mat-stroked-button
                type="button"
                (click)="onCancel()">
                Cancel
            </button>
            <button
                class="ml-4"
                mat-flat-button
                type="button"
                [disabled]="accountForm.invalid"
                (click)="createBin()"
                [color]="'primary'">Save
            </button>
        </div>
        <!-- Divider -->
        <div class="mt-11 mb-10 border-t"></div>

    </form>
</div>
<div class="w-full p-4 flex items-center">
    <!-- Search Input Field with Bottom Spacing -->
    <mat-form-field
        class="fuse-mat-dense fuse-mat-rounded min-w-64"  
        [subscriptSizing]="'dynamic'"
        style="margin-bottom: 20px; width: 300px; margin-right: 20px;"> <!-- Added margin-right for spacing -->
        <mat-icon
            class="icon-size-5"
            matPrefix
            [svgIcon]="'heroicons_solid:magnifying-glass'"></mat-icon>
        <input
            matInput
            (keyup)="applyFilter($event)"
            [autocomplete]="'off'"
            [placeholder]="'Search'">
    </mat-form-field>

    <!-- Bank Code Select Dropdown with Bottom Spacing -->
    <mat-form-field
        class="fuse-mat-dense fuse-mat-rounded min-w-64 search-field"
        [subscriptSizing]="'dynamic'"
        style="margin-bottom: 20px; width: 300px;"> <!-- No need for margin-right on this element -->
        <mat-select placeholder="Select Bank Code" (selectionChange)="filterByBankCode($event.value)">
            <!-- Option to reset the filter and show all data -->
            <mat-option [value]="'all'">All</mat-option>
            <mat-option *ngFor="let bank of uniqueBankCodes" [value]="bank">
                {{ bank }}
            </mat-option>
        </mat-select>
    </mat-form-field>
</div>


  
<div class="mat-elevation-z8 rounded-lg overflow-hidden">
    <!-- Global Search Field -->

    <div class="mat-elevation-z8 rounded-lg overflow-hidden table-container">
        <!-- Table -->
        <table mat-table [dataSource]="dataSource" matSort class="mat-table-custom">

            <!-- Columns -->
            <ng-container matColumnDef="bin">
                <mat-header-cell *matHeaderCellDef mat-sort-header class="table-header">BIN</mat-header-cell>
                <mat-cell *matCellDef="let element"> {{element.bin}} </mat-cell>
            </ng-container>

            <ng-container matColumnDef="systemCode">
                <mat-header-cell *matHeaderCellDef mat-sort-header class="table-header">System Code</mat-header-cell>
                <mat-cell *matCellDef="let element"> {{element.systemCode}} </mat-cell>
            </ng-container>

            <ng-container matColumnDef="cardType">
                <mat-header-cell *matHeaderCellDef mat-sort-header class="table-header">Card Type</mat-header-cell>
                <mat-cell *matCellDef="let element"> {{element.cardType}} </mat-cell>
            </ng-container>

            <ng-container matColumnDef="serviceCode">
                <mat-header-cell *matHeaderCellDef mat-sort-header class="table-header">Service Code</mat-header-cell>
                <mat-cell *matCellDef="let element"> {{element.serviceCode}} </mat-cell>
            </ng-container>

            <ng-container matColumnDef="bankCode">
                <mat-header-cell *matHeaderCellDef mat-sort-header class="table-header">Bank Code</mat-header-cell>
                <mat-cell *matCellDef="let element"> {{element.bankCode}} </mat-cell>
            </ng-container>

            <ng-container matColumnDef="bankName">
                <mat-header-cell *matHeaderCellDef mat-sort-header class="table-header">Bank Name</mat-header-cell>
                <mat-cell *matCellDef="let element"> {{element.bankName}} </mat-cell>
            </ng-container>

            <ng-container matColumnDef="actions">
                <mat-header-cell *matHeaderCellDef> Actions </mat-header-cell>
                <mat-cell *matCellDef="let item">
                    <div class="actions-container" style="display: flex; align-items: center; gap: 8px;"> 
                        <button mat-icon-button color="primary" (click)="onEdit(item)">
                            <mat-icon>edit</mat-icon> 
                        </button>
                        <button mat-icon-button color="warn" (click)="onDelete(item)">
                            <mat-icon>delete</mat-icon> 
                        </button>
                    </div>
                </mat-cell>
            </ng-container>
            
            <!-- Header and Row -->
            <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
            <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
        </table>

        <!-- Paginator -->
        <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>
    </div>
</div>



